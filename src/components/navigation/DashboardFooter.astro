---
// Import the necessary dependencies
import FooterSocialLink from '@components/ui/links/FooterSocialLink.astro';
import Icon from '@components/ui/icons/Icon.astro';
import { SITE } from '@data/constants';
import enStrings from '@utils/navigation';

// Use the English strings with type assertion
const strings = enStrings as {
  socialLinks: Record<string, string>;
};

const crafted: string = 'Forged by';

// Quick links for dashboard footer
const dashboardLinks = [
  { name: 'Documentation', url: 'https://docs.4mina.app', external: true },
  { name: 'Home', url: '/', external: false },
  {
    name: 'Support Server',
    url: import.meta.env.SUPPORT_SERVER || 'https://discord.gg/your-server',
    external: true,
  },
  {
    name: 'GitHub',
    url: 'https://github.com/iamvikshan/amina',
    external: true,
  },
];

// Helper function to determine if a URL is external
const isExternalUrl = (url: string): boolean => {
  return url.startsWith('http') || url.startsWith('https');
};

// Helper function to get link attributes
const getLinkAttributes = (link: { url: string; name: string }) => {
  const isExternal = isExternalUrl(link.url);
  return {
    target: isExternal ? '_blank' : '_self',
    rel: isExternal ? 'noopener noreferrer' : undefined,
  };
};
---

<footer
  class="relative w-full overflow-hidden bg-night-black border-t border-night-steel/30 mt-auto"
>
  <!-- Background Glow Effects -->
  <div class="absolute inset-0 pointer-events-none overflow-hidden">
    <!-- Crimson glow top-left -->
    <div
      class="absolute -top-20 -left-20 w-64 h-64 bg-amina-crimson/15 rounded-full blur-[100px]"
    >
    </div>
    <!-- Cyber blue glow bottom-right -->
    <div
      class="absolute -bottom-20 -right-20 w-64 h-64 bg-cyber-blue/15 rounded-full blur-[100px]"
    >
    </div>
  </div>

  <div
    class="relative mx-auto w-full max-w-[85rem] px-4 py-6 sm:px-6 lg:px-16 2xl:max-w-screen-2xl"
  >
    <!-- Single Row Layout -->
    <div class="space-y-4">
      <!-- Main Row: Copyright, Quick Links, Social Links -->
      <div class="flex flex-col lg:flex-row items-center justify-between gap-4">
        <!-- Left: Copyright & Creator -->
        <div
          class="flex flex-col items-center lg:items-start gap-1 text-center lg:text-left"
        >
          <p class="text-xs text-neutral-400 dark:text-neutral-500">
            ¬© <span id="current-year"></span>
            {SITE.title}. All rights reserved.
          </p>
          <p class="text-xs text-neutral-500 dark:text-neutral-600">
            {crafted}
            <a
              class="text-amina-crimson font-medium underline underline-offset-2 outline-none transition-all duration-300 hover:text-rose-red hover:decoration-dashed focus:outline-none focus-visible:text-rose-red"
              href="https://vikshan.me"
              target="_blank"
              rel="noopener noreferrer"
            >
              vikshan
            </a> with ‚öîÔ∏è and üíª
          </p>
        </div>

        <!-- Center: Quick Links -->
        <div class="flex flex-wrap items-center justify-center gap-x-6 gap-y-2">
          {
            dashboardLinks.map((link) => (
              <a
                href={link.url}
                target={link.external ? '_blank' : '_self'}
                rel={link.external ? 'noopener noreferrer' : undefined}
                class="group inline-flex items-center gap-x-1.5 text-sm text-neutral-400 outline-none transition-all duration-300 hover:text-amina-crimson focus-visible:text-amina-crimson dark:text-neutral-500 dark:hover:text-amina-crimson"
              >
                <span class="w-1 h-1 bg-night-steel rounded-full group-hover:bg-amina-crimson transition-colors duration-300" />
                {link.name}
              </a>
            ))
          }
        </div>

        <!-- Right: Social Links -->
        <div class="flex items-center gap-3">
          {
            Object.entries(strings.socialLinks).map(([platform, url]) => (
              <FooterSocialLink
                url={url}
                {...getLinkAttributes({ url, name: platform })}
              >
                <Icon name={`${platform}Footer`} class="w-5 h-5" />
              </FooterSocialLink>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
  // Set current year
  const year = new Date().getFullYear();
  const element = document.getElementById('current-year');
  if (element) element.innerText = year.toString();
</script>
